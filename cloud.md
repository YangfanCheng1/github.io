## About
Let's talk following Cloud subjects!
 * Multi-Region/FailOver

## Multi-region/FailOver
Having our application hosted in multiple regions not only improve overall latency but also provide a way to fail over in event of any regional outage. Furthermore, a centralized domain - say `example.com` instead of `example.east.com` and `exmaple.west.com` - should be used with a DNS Service like AWS Route53 that takes care of routing. 

Technologies used:
* Helm
* AWS Route53
* Kubernetes

Say a service needs to be hosted in both AWS us-east-1 and us-west-1 regions. We can define our helm definitions as below:
```yaml
# us-east-1 definition
apiVersion: extensions/v1beta1
kind: Ingress
metadata:
  name: nginx
  annotations:
    external-dns.alpha.kubernetes.io/aws-region: us-east-1
    external-dns.alpha.kubernetes.io/set-identifier: east

---
# us-east-2 definition
apiVersion: extensions/v1beta1
kind: Ingress
metadata:
  name: nginx
  annotations:
    external-dns.alpha.kubernetes.io/aws-region: us-west-1
    external-dns.alpha.kubernetes.io/set-identifier: west
```
Should result in the below record creation:

| Record name | Type  | Routing Policy | Differentiator | Value/Route traffic to | 
|:------------|:-----:|---------------:| --------------:| ----------------------:|
| example.com | CNAME |        Latency | us-east-1      | default.east.domain    |
| example.com | CNAME |        Latency | us-west-1      | default.west.domain    |  

Note that `default.east.domain` is a default domain that is generated by another AWS Service, such as API Gateway, Application/Network Load Balancers. 